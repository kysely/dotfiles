#!/bin/bash

echo ""
echo "Installing Vim environment"

# INSTALL .VIMRC
cp ./.vimrc ~/.vimrc
echo "    Installed .vimrc config file"

# INSTALL SNIPPETS
mkdir -p ~/.vim/snippets
cp ./snippets/* ~/.vim/snippets/
echo "    Installed Vim snippets"
echo ""

# INSTALL PLUGINS
# --- Pathogen
echo "    Installing Pathogen"
echo "        Downloading and installing..."
mkdir -p ~/.vim/autoload ~/.vim/bundle && \
curl -LSso ~/.vim/autoload/pathogen.vim https://tpo.pe/pathogen.vim

echo "    Installed Pathogen"
echo ""

# Generic function for installing plugins using Pathogen
install_plugin() {
echo "    Installing ${1}"
echo "        Cloning..."

{
	cd ~/.vim/bundle/
	git clone --quiet --recursive ${2}

	echo "    Installed ${1}"
} || {
	echo "    Couldn't install ${1}"
}

echo ""
}

install_plugin "Ayu Color Scheme" git://github.com/ayu-theme/ayu-vim.git
install_plugin "Python Mode" git://github.com/python-mode/python-mode.git
install_plugin "NERDTree" git://github.com/scrooloose/nerdtree.git
install_plugin "Commentary" git://github.com/tpope/vim-commentary.git
install_plugin "Fugitive" git://github.com/tpope/vim-fugitive.git
install_plugin "CtrlP" git://github.com/ctrlpvim/ctrlp.vim.git
install_plugin "Lightline" git://github.com/itchyny/lightline.vim.git
install_plugin "Lightline Buffer" git://github.com/taohex/lightline-buffer.git
install_plugin "ConqueTerm" git://github.com/rosenfeld/conque-term.git

# -- Completor
if [ "$1" == "--completor" ]; then
	echo "    Installing Completor"
	echo "        Cloning..."
	mkdir -p ~/.vim/pack/completor/start
	cd ~/.vim/pack/completor/start
	git clone -q git://github.com/maralla/completor.vim.git

	echo "        Installing Jedi..."
	python3 -m pip install jedi && pip3 install jedi

	echo "    Installed Completor"
	echo ""
fi

